(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/message"],{"2c10":function(t,e,n){"use strict";n.r(e);var s=n("e335"),o=n("d509");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("86ef");var c=n("2877"),a=Object(c["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=a.exports},"86ef":function(t,e,n){"use strict";var s=n("c6a4"),o=n.n(s);o.a},"985f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(n("00b9")),o=i(n("aacf"));function i(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},scrollTop:0,messages:[{user:"home",type:"head",content:"你好!"}]}},components:{chatInput:s.default,messageShow:o.default},created:function(){var e=t.getSystemInfoSync();this.style.pageHeight=e.windowHeight,this.style.contentViewHeight=e.windowHeight-t.getSystemInfoSync().screenWidth/750*100},methods:{getInputMessage:function(t){console.log(t),this.addMessage("customer",t.content,!1),this.toRobot(t.content)},addMessage:function(t,e,n,s){var o=this;o.messages.push({user:t,content:e,hasSub:n,subcontent:s})},scrollToBottom:function(){var e=this,n=t.createSelectorQuery();n.selectAll(".m-item").boundingClientRect(),n.select("#scrollview").boundingClientRect(),n.exec(function(t){e.style.mitemHeight=0,t[0].forEach(function(t){e.style.mitemHeight=e.style.mitemHeight+t.height+20}),e.style.mitemHeight>e.style.contentViewHeight&&(e.scrollTop=e.style.mitemHeight-e.style.contentViewHeight)})},toRobot:function(e){var n=this,s="http://www.tuling123.com/openapi/api";t.request({url:s,data:{key:"acfbca724ea1b5db96d2eef88ce677dc",info:e,userid:"uni-test"},success:function(t){n.addMessage("home",t.data.text,!1),n.scrollToBottom(),console.log("request success:"+t.data.text)},fail:function(e){console.log("request fail",e),t.showModal({content:e.errMsg,showCancel:!1})}})}}};e.default=c}).call(this,n("543d")["default"])},bfe7:function(t,e,n){"use strict";n("9471");var s=i(n("b0ce")),o=i(n("2c10"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(o.default))},c6a4:function(t,e,n){},d509:function(t,e,n){"use strict";n.r(e);var s=n("985f"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);e["default"]=o.a},e335:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-column"},[n("view",{staticClass:"content",style:{height:t.style.contentViewHeight+"px"},attrs:{id:"content"}},[n("scroll-view",{style:{height:t.style.contentViewHeight+"px"},attrs:{id:"scrollview","scroll-y":"true","scroll-with-animation":!0,"scroll-top":t.scrollTop}},[t._l(t.messages,function(t,e){return n("message-show",{key:e,attrs:{message:t,id:e,mpcomid:"3f9419ca-0-"+e}})}),n("view",{attrs:{id:"bottom"}})],2)],1),n("view",{staticClass:"foot"},[n("chat-input",{attrs:{eventid:"3f9419ca-0",mpcomid:"3f9419ca-1"},on:{"send-message":t.getInputMessage}})],1)])},o=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o})}},[["bfe7","common/runtime","common/vendor"]]]);